#!/bin/sh

# shellcheck source=./setup
## TODO: What happens if $0 have no slashes?  Can that happen?
. "${0%/*}/setup"

# Test that EMACS_BIN is set to emacs if INSIDE_EMACS is set, even if
# EMACS is also set.

env -S -i - \
	EMACS="$fakemacs"            \
	PATH="${0%/*}:$defaultpath"  \
	BASH_ENV="$BASH_ENV" \
	BASH_XTRACEFD="$BASH_XTRACEFD" \
	KCOV_BASH_COMMAND="$KCOV_BASH_COMMAND" \
	KCOV_BASH_XTRACEFD="$KCOV_BASH_XTRACEFD" \
	PS4="$PS4" \
	"$buttercup" --help |
	checkoutput -n1 "buttercup [OPTIONS] [DIRS]"

env -S -i - \
	EMACS="$fakemacs"            \
	PATH="${0%/*}:$defaultpath"  \
	BASH_ENV="$BASH_ENV" \
	BASH_XTRACEFD="$BASH_XTRACEFD" \
	KCOV_BASH_COMMAND="$KCOV_BASH_COMMAND" \
	KCOV_BASH_XTRACEFD="$KCOV_BASH_XTRACEFD" \
	PS4="$PS4" \
	"$buttercup" -h |
	checkoutput -n1 "buttercup [OPTIONS] [DIRS]"
